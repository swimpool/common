angular.module("widgetgecko.services",[]).factory("Chameleon",function($rootScope){var ChameleonService={};ChameleonService.isChameleon=true;ChameleonService.version="0.1.5";ChameleonService.init=function(options){var cs=this;initEventListeners();chameleon.widget({onLoad:function(){cs.broadcastEvent("chameleon.load")},onCreate:function(){cs.broadcastEvent("chameleon.create")},onResume:function(){cs.broadcastEvent("chameleon.resume")},onPause:function(){cs.broadcastEvent("chameleon.pause")},onLanguageChanged:function(){cs.broadcastEvent("chameleon.languageChange")},onScrollTop:function(){cs.broadcastEvent("chameleon.scrollTop")},onScrollElsewhere:function(){cs.broadcastEvent("chameleon.scrollElsewhere")},onLayoutModeStart:function(){cs.broadcastEvent("chameleon.layoutStart")},onLayoutModeComplete:function(){cs.broadcastEvent("chameleon.layoutComplete")},onConnectionAvailableChanged:function(available){if(available){cs.broadcastEvent("chameleon.connect")}else{cs.broadcastEvent("chameleon.disconnect")}},onConfigure:function(){cs.broadcastEvent("chameleon.configure")},onTitleBar:function(){cs.broadcastEvent("chameleon.titlebar")},onRefresh:function(){cs.broadcastEvent("chameleon.refresh")},onAction:function(){cs.broadcastEvent("chameleon.action")},notChameleon:function(){cs.isChameleon=false;cs.broadcastEvent("chameleon.notchameleon")}})};ChameleonService.broadcastEvent=function(event){$rootScope.$broadcast(event)};ChameleonService.isConnected=function(){return chameleon.connected()};function initEventListeners(){$rootScope.$on("chameleon.polling.start",function(event,data){chameleon.poll({id:data.id,action:"start",interval:data.interval*1e3,callback:data.callback})});$rootScope.$on("chameleon.polling.stop",function(event,data){chameleon.poll({id:data.id,action:"stop"})});$rootScope.$on("chameleon.setTitle",function(event,title){chameleon.setTitle({text:title})});$rootScope.$on("chameleon.openLink",function(event,url){if(!chameleon.connected()){return}if(ChameleonService.isChameleon){chameleon.intent({action:"android.intent.action.VIEW",data:url})}else{window.open(url)}})}return ChameleonService});